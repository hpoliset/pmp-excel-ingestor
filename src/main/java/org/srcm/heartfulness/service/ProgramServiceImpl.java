package org.srcm.heartfulness.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.dao.DataAccessException;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import org.srcm.heartfulness.model.Participant;
import org.srcm.heartfulness.model.Program;
import org.srcm.heartfulness.repository.ProgramRepository;

@Service
public class ProgramServiceImpl implements ProgramService{

	@Autowired
	ProgramRepository programRepository;
	
	/*
	 * (non-Javadoc)
	 * @see org.srcm.heartfulness.service.ProgramService#createProgram(java.lang.String)
	 */
	@Override
	@Transactional
	public Program createProgram(Program program) {
		programRepository.save(program);
		return program;
	}

	/*
	 * (non-Javadoc)
	 * @see org.srcm.heartfulness.service.ProgramService#isProgramExist(Program program)
	 */
	@Override
	@Transactional(readOnly=true)
	public boolean isProgramExist(Program program) {
		return programRepository.isProgramExist(program);
	}

	/*
	 * (non-Javadoc)
	 * @see org.srcm.heartfulness.service.ProgramService#findByAutoGeneratedEventId(java.lang.String)
	 */
	@Override
	public Program findByAutoGeneratedEventId(String autoGeneratedEventid) {
		
		return programRepository.findByAutoGeneratedEventId(autoGeneratedEventid);
	}
	
	@Override
	public List<Program> getProgramByEmail(String email,boolean isAdmin) {
		return programRepository.getEventByEmail(email,isAdmin);
	}

	@Override
	public Program getProgramById(int id) {
		 return programRepository.getEventById(id);
	}

	@Override
	public List<Participant> getParticipantByProgramId(int decryptedProgramId) {
		return	programRepository.getParticipantList(decryptedProgramId);
	}

}
